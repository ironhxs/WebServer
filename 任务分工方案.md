# WebServer 项目任务分工方案

## 📊 项目概述

这是一个**基于C++11的高性能Web服务器**项目，采用Epoll + 线程池 + 数据库连接池 + 异步日志的企业级架构。

### 核心技术栈
- **I/O多路复用**: Epoll (LT/ET模式)
- **并发模型**: Reactor/Proactor
- **线程池**: 工作线程池处理请求
- **数据库**: MySQL连接池
- **日志系统**: 异步日志队列
- **定时器**: 超时连接自动清理
- **HTTP协议**: HTTP/1.1, Keep-Alive, 文件上传
- **动态解析**: PHP支持

---

## 🎯 任务分工 (63% - 37%)

### **你的任务 (63% - 核心功能、架构与前端)**

#### 1️⃣ **核心服务器架构** (20%)
- ✅ WebServer核心类实现 (`src/core/webserver.cpp`)
  - Epoll事件循环主逻辑
  - 监听socket创建与配置
  - 信号处理机制
  - 定时器管理
  - 运行时状态监控
  
- ✅ 配置管理系统 (`src/core/config.cpp`)
  - 命令行参数解析
  - 配置文件加载
  - 运行时配置

#### 2️⃣ **HTTP协议处理** (15%)
- ✅ HTTP连接类 (`src/http/http_connection.cpp`)
  - HTTP请求解析 (状态机实现)
  - HTTP响应生成
  - Keep-Alive连接管理
  - 文件上传处理
  - PHP-CGI接口
  - 状态监控JSON接口

#### 3️⃣ **线程池与并发模型** (10%)
- ✅ 线程池模板类 (`include/threadpool.h`)
  - 工作队列管理
  - 线程创建与调度
  - 任务分发机制
  
- ✅ Reactor/Proactor模型实现
  - 事件处理逻辑
  - 并发模式切换

#### 4️⃣ **日志系统** (8%)
- ✅ 异步日志实现 (`src/log/log.cpp`)
  - 阻塞队列 (`include/blocking_queue.h`)
  - 同步/异步模式
  - 日志分割与缓冲
  - 运行时日志记录

#### 5️⃣ **Web前端资源** (10%)
- ✅ 网站页面开发 (`resources/webroot/`)
  - index.html (首页)
  - pages/log.html (登录)
  - pages/register.html (注册)
  - pages/upload.html (文件上传)
  - pages/status.html (监控页面)
  - 404.html (错误页)
  
- ✅ 静态资源
  - CSS样式文件
  - JavaScript交互
  - 图片素材

---

### **同学的任务 (37% - 辅助模块、文档与测试)**

#### 1️⃣ **数据库连接池** (12%)
- ✅ 数据库连接池实现 (`src/database/database_pool.cpp`)
  - 连接创建与管理
  - RAII封装
  - 连接复用逻辑
  
- ✅ 用户注册/登录功能
  - SQL语句设计
  - 数据库初始化脚本 (`config/setup_db.sql`)
  - CGI接口对接

#### 2️⃣ **定时器管理** (8%)
- ✅ 定时器链表实现 (`src/timer/timer_list.cpp`)
  - 升序链表维护
  - 超时检测
  - 连接清理逻辑
  
- ✅ 线程同步工具 (`include/thread_sync.h`)
  - 信号量、互斥锁、条件变量封装

#### 3️⃣ **项目文档与测试** (7%)
- ✅ 核心文档编写
  - README.md (项目总体说明)
  - PROJECT_STRUCTURE.md (架构说明)
  - QUICKSTART.md (快速开始)
  - 各模块README (http/threadpool/log)
  
- ✅ 性能压测与调优
  - Webbench压力测试
  - 性能数据分析
  - 优化报告

#### 4️⃣ **构建与部署** (6%)
- ✅ 构建系统优化 (`Makefile`)
  - 编译规则
  - 依赖管理
  - 清理规则
  
- ✅ 运维脚本 (`scripts/`)
  - manage.sh (服务管理)
  - run_webbench.sh (压测脚本)
  - tunnel脚本 (内网穿透)

#### 5️⃣ **辅助文档** (4%)
- ✅ 模块级文档
  - database/README.md
  - timer/README.md
  - lock/README.md
  
- ✅ 部署文档
  - 安装依赖说明
  - 配置示例
  - 故障排查

---

## 🏆 验收评分标准对照

### **优秀等级 (90-100分)** - 你的部分
| 评分项 | 分值 | 你的任务完成情况 |
|--------|------|-----------------|
| 架构设计 | 15分 | ✅ Epoll+线程池+连接池架构完整 |
| 核心功能 | 20分 | ✅ HTTP解析、并发处理、日志系统 |
| 代码质量 | 15分 | ✅ 详细注释、设计模式、异常处理 |
| 性能表现 | 15分 | ✅ Webbench 10000+QPS |
| 文档完整性 | 10分 | ✅ 技术文档、API说明、架构图 |
| 创新亮点 | 10分 | ✅ 状态监控、PHP支持、双并发模型 |
| 测试与部署 | 10分 | ✅ 压力测试、一键部署、运维脚本 |
| 团队协作 | 5分 | ✅ 明确分工、代码规范 |

**预期得分: 95-100分** ✅

---

### **良好等级 (80-89分)** - 同学的部分
| 评分项 | 分值 | 同学任务完成情况 |
|--------|------|-----------------|
| 功能完整性 | 20分 | ✅ 数据库、定时器、前端页面 |
| 代码规范 | 15分 | ✅ 基本注释、命名规范 |
| 模块对接 | 15分 | ✅ 与核心模块正确集成 |
| 文档说明 | 10分 | ✅ 模块README、配置说明 |
| 测试验证 | 10分 | ✅ 功能测试通过 |

**预期得分: 82-88分** ✅

---

## 📝 工作建议

### **你需要重点展示的内容**

1. **技术深度**
   - 详细讲解Epoll的LT/ET模式区别和使用场景
   - 解释Reactor/Proactor并发模型的实现原理
   - 说明HTTP状态机的设计思路
   - 展示异步日志队列的性能优化

2. **代码亮点**
   ```cpp
   // 示例：展示你对核心代码的理解
   // 1. Epoll事件循环
   // 2. HTTP请求解析状态机
   // 3. 线程池任务调度
   // 4. 零拷贝文件传输 (mmap)
   ```

3. **性能数据**
   - Webbench压测结果 (QPS, 成功率)
   - 不同触发模式的性能对比
   - 同步/异步日志的性能差异
   - 线程池规模对性能的影响

4. **前端展示**
   - 美观的网页设计
   - 响应式布局
   - 用户交互体验
   - 文件上传功能演示

### **同学需要完成的内容**

1. **数据库功能**
   - 确保注册/登录功能正常
   - 数据库连接池稳定运行
   - SQL注入防护

2. **定时器模块**
   - 超时连接自动断开
   - 链表维护正确性

3. **文档与测试**
   - 编写模块级README文档
   - 功能测试与验证
   - 配置说明文档
   - 辅助压力测试

4. **部署脚本**
   - 一键启动/停止脚本
   - 日志查看工具
   - 配置文件管理

---

## 🚀 验收准备清单

### **你的展示材料** (优秀等级)

- [ ] **PPT/演示文档** (15-20页)
  - 项目背景与技术选型
  - 核心架构设计
  - 关键技术实现
  - 前端页面展示
  - 创新点总结

- [ ] **代码演示**
  - 核心代码讲解 (webserver.cpp, http_connection.cpp)
  - 调试过程演示
  - 性能监控展示
  - 前端功能演示

- [ ] **实际运行演示**
  - 启动服务器
  - 访问网站各页面
  - 用户注册/登录流程
  - 文件上传功能
  - 状态监控页面
  - 日志查看

### **同学的展示材料** (良好等级)

- [ ] **功能演示**
  - 用户注册/登录功能
  - 数据库连接池运行
  - 定时器超时清理

- [ ] **模块说明**
  - 数据库设计文档
  - 定时器模块说明
  - 脚本使用文档
  
- [ ] **测试报告**
  - 功能测试结果
  - 压测协助记录
  - 问题修复日志

---

## 💡 关键差异点 (优秀 vs 良好)

| 维度 | 你的任务 (优秀) | 同学的任务 (良好) |
|------|----------------|------------------|
| **技术难度** | 高 (并发、I/O多路复用、前端) | 中 (数据库、定时器、文档) |
| **代码量** | 核心逻辑 2000+ 行 + 前端页面 | 辅助模块 800+ 行 + 测试文档 |
| **工作内容** | 后端架构 + 前端界面 | 数据库 + 文档测试 |
| **创新性** | 双并发模型、状态监控、交互界面 | 功能实现 + 测试验证 |
| **展示亮点** | 技术深度 + 可视化效果 | 功能完整 + 文档齐全 |
| **问题排查** | 深度调试 (gdb, valgrind) | 功能测试 + 压测协助 |

---

## 📞 协作要点

### **接口约定**
- 数据库连接池接口: `connection_pool::GetInstance()`
- 定时器接口: `add_timer()`, `del_timer()`
- 日志接口: `LOG_INFO()`, `LOG_ERROR()`

### **分支管理** (建议)
```bash
# 你的分支
git checkout -b feature/core-server

# 同学的分支
git checkout -b feature/database-frontend
```

### **代码审查**
- 你审查同学的代码接口正确性
- 同学测试你提供的核心功能

---

## 🎓 总结

**你的63%工作**聚焦于**核心架构 + 前端界面**，既展示技术深度又有可视化效果，对应**优秀等级**。

**同学的37%工作**聚焦于**辅助模块 + 文档测试**，完成基础功能并提供完整的测试文档，对应**良好等级**。

这样的分工既合理又能让你充分展示全栈能力！💪

---

*生成时间: 2026-01-11*
*项目路径: d:\Network\network\WebServer*
